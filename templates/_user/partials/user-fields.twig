{% import '_user/partials/form-macros' as m %}

{% set inputUsernameAttributes = {
	id: 'username',
	type: 'text',
	name: 'username',
	value: user.username,
	required: true,
	errors: user.getErrors('username'),
	label: 'Username'|t('app'),
} %}

{% set inputEmailAttributes = {
	id: 'email',
	type: 'email',
	name: 'email',
	value: user.email,
	required: true,
	errors: user.getErrors('email'),
	label: 'Email'|t('app'),	
} %}

{% set inputFullNameAttributes = {
   id: 'fullName',
   type: 'text',
   name: 'fullName',
   value: user.fullName,
   required: true,
   errors: user.getErrors('fullName'),
   label: 'Full Name'|t('app'),
} %}

{% set inputPasswordAttributes = {	
	id: 'password',
	type: 'password',
	name: 'password',
	required: user.id is null,
	errors: user.id is not null ? user.getErrors('currentPassword') : user.getErrors('password'),
	label: user.id is not null ? 'Current Password'|t('app') : 'Password'|t('app'),
} %}

{% set newPasswordInputAttributes = {
	id: 'newPassword',
	type: 'password',
	name: 'newPassword',
	errors: user.getErrors('newPassword'),
	label: 'New Password'|t('app'),
} %}


{# username #}
{% if not craft.app.config.general.useEmailAsUsername %}
	{{m.formFieldInput(inputUsernameAttributes)}}
{% endif %}

{# email #}
{{m.formFieldInput(inputEmailAttributes)}}

{# full name #}
{{m.formFieldInput(inputFullNameAttributes)}}

{# custom fields #}
{% set fieldsList = user.getFieldLayout().customFields %}
{% for field in fieldsList %}
	{% include '_user/partials/custom-fields' with {
		model: user,
		field: field,
	} only %}
{% endfor %}

{# password #}
{{m.formFieldInput(inputPasswordAttributes)}}

{# new pasword #}
{% if user.id is not null %}
	{{m.formFieldInput(newPasswordInputAttributes)}}
{% endif %}